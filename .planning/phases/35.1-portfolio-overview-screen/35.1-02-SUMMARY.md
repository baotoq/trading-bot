---
phase: 35.1-portfolio-overview-screen
plan: 02
subsystem: ui
tags: [flutter, glassmorphism, GlassCard, PressableScale, skeletonizer, scrollItem]

# Dependency graph
requires:
  - phase: 34-shared-glass-primitives
    provides: GlassCard (scrollItem variant), PressableScale, AppShimmer, GlassTheme tokens
  - phase: 35.1-01
    provides: PortfolioScreen shell with CustomScrollView sliver architecture, flat asset list

provides:
  - PortfolioAssetListItem: Glass scrollItem asset row with colored badge, price+P&L, holding value
  - Updated PortfolioScreen: wired to PortfolioAssetListItem, skeleton matches new layout

affects:
  - 35.2-dca-bot-detail-screen (same PortfolioAssetListItem pattern can be reused for asset rows)
  - Phase 37 (AllocationDonutChart glow treatment still deferred — unchanged in this plan)

# Tech tracking
tech-stack:
  added: []
  patterns:
    - Deterministic palette color: _palette[ticker.hashCode.abs() % 6] — no randomness, reproducible per ticker
    - Skeleton uses real GlassCard(scrollItem) — matches loaded state glass appearance, no Card() placeholder
    - Static _formatQuantity helper: ETF integer, crypto 4dp with trailing zero stripping via RegExp
    - PressableScale wrapping GlassCard(scrollItem) — no BackdropFilter, 60fps scroll maintained

key-files:
  created:
    - TradingBot.Mobile/lib/features/portfolio/presentation/widgets/portfolio_asset_list_item.dart
  modified:
    - TradingBot.Mobile/lib/features/portfolio/presentation/portfolio_screen.dart

key-decisions:
  - "PortfolioAssetListItem uses GlassVariant.scrollItem — no BackdropFilter in list items, preserving 60fps scroll performance per Impeller constraint established in Phase 34"
  - "Ticker badge color uses ticker.hashCode.abs() % 6 — .abs() guards against negative hashCode on some Dart runtimes"
  - "Skeleton rebuilt with actual GlassCard(scrollItem) for asset row bones — surface color matches loaded state without separate color values"
  - "asset_row.dart import removed from portfolio_screen.dart — file preserved in project for potential other consumers"

requirements-completed: [PORT-UI-03]

# Metrics
duration: 3min
completed: 2026-02-22
---

# Phase 35.1 Plan 02: Glass Asset List Item and Skeleton Update Summary

**Glass-styled PortfolioAssetListItem (scrollItem variant + PressableScale) replacing AssetRow, with rebuilt loading skeleton matching the full hero+tabs+chips+donut+list layout**

## Performance

- **Duration:** 3 min
- **Started:** 2026-02-22T13:11:13Z
- **Completed:** 2026-02-22T13:13:50Z
- **Tasks:** 2
- **Files modified:** 2 (1 created, 1 rebuilt)

## Accomplishments

- Created `PortfolioAssetListItem` — glass scrollItem asset row with colored CircleAvatar ticker badge, PressableScale tap interaction, CMC-style middle column (name + staleness icon + price + P&L%), and trailing column (holding value + quantity). Zero dart analyze issues.
- Replaced `AssetRow` in `SliverList.builder` with `PortfolioAssetListItem` — import cleaned up, no unused imports remain.
- Rebuilt `_buildLoadingSkeleton` to match the new full-screen layout: hero GlassCard shape, tab bar row, filter chips row, donut placeholder, 4 glass scrollItem row bones.
- Skeleton now uses actual `GlassCard(variant: GlassVariant.scrollItem)` for asset row bones — surface appearance matches the loaded state.
- All alpha operations use `withAlpha(int)` per project convention; all monetary values use `AppTheme.moneyStyle` tabular figures via `copyWith`.
- Full project `dart analyze TradingBot.Mobile` — zero issues.

## Task Commits

Each task was committed atomically:

1. **Task 1: Create PortfolioAssetListItem with glass scrollItem variant** - `5ebdccd` (feat)
2. **Task 2: Wire PortfolioAssetListItem into screen and update loading skeleton** - `0b00b03` (feat)

## Files Created/Modified

- `TradingBot.Mobile/lib/features/portfolio/presentation/widgets/portfolio_asset_list_item.dart` — New widget: `PressableScale` wrapping `GlassCard(scrollItem)` with 3-section row: (1) `CircleAvatar` ticker badge with deterministic palette color, (2) name + staleness indicator + price + P&L% badge, (3) holding value + quantity with trailing zero stripping
- `TradingBot.Mobile/lib/features/portfolio/presentation/portfolio_screen.dart` — AssetRow swapped for PortfolioAssetListItem in itemBuilder; `asset_row.dart` import removed; `_buildLoadingSkeleton` rebuilt to match new layout (hero GlassCard, tab bar, filter chips, donut, 4 glass row bones)

## Decisions Made

- `GlassVariant.scrollItem` used in list items — no BackdropFilter, preserving 60fps scroll per Impeller constraint from Phase 34.
- `ticker.hashCode.abs() % 6` for palette index — `.abs()` guards against negative hashCode values on some Dart runtime targets.
- Skeleton uses real `GlassCard(scrollItem)` containers for asset row bones — the Skeletonizer library paints over the glass surface, giving visual continuity between skeleton and loaded state.
- `asset_row.dart` file preserved in project — only the import in `portfolio_screen.dart` was removed. File may still be used by other screens/tests.

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None.

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness

- Portfolio Overview Screen (Phase 35.1) is now complete — both plans executed, all PORT-UI requirements satisfied
- Phase 35.2 (DCA Bot Detail Screen) can begin; the PortfolioAssetListItem pattern (PressableScale + GlassCard scrollItem + badge) is available as a reference
- `asset_row.dart` can be deprecated/removed in a future cleanup phase once confirmed no other consumers exist

---
*Phase: 35.1-portfolio-overview-screen*
*Completed: 2026-02-22*
