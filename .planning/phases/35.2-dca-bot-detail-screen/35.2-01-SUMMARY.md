---
phase: 35.2-dca-bot-detail-screen
plan: 01
subsystem: ui
tags: [flutter, dart, go_router, riverpod, hooks_riverpod, glass_card, pressable_scale, tabbar]

# Dependency graph
requires:
  - phase: 35.1-portfolio-overview-screen
    provides: GlassCard, PressableScale, AppTheme, GlassTheme primitives established
  - phase: 33-glass-foundation
    provides: GlassCard widget, GlassTheme extension, withAlpha convention
  - phase: 34-pressable-scale
    provides: PressableScale widget, AppShimmer, skeletonizer integration
provides:
  - DcaBotDetailScreen HookConsumerWidget with 3-tab DefaultTabController layout
  - BotIdentityHeader with BTC CircleAvatar and uptime computation from firstPurchaseDate
  - BotStatsGrid 6-field stat grid in GlassCard(stationary) with PnL coloring
  - BotActionButtons with PressableScale More (no-op) and Share (clipboard) buttons
  - GoRoute /home/bot-detail with parentNavigatorKey: rootNavigatorKey for full-screen push
affects: [35.2-02, future detail screen plans]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - HookConsumerWidget with DefaultTabController for multi-tab detail screen
    - Stale cache display on AsyncError with ref.listen snackbar notification
    - Private _OverviewTab HookConsumerWidget watching multiple providers

key-files:
  created:
    - TradingBot.Mobile/lib/features/home/presentation/dca_bot_detail_screen.dart
    - TradingBot.Mobile/lib/features/home/presentation/widgets/bot_identity_header.dart
    - TradingBot.Mobile/lib/features/home/presentation/widgets/bot_stats_grid.dart
    - TradingBot.Mobile/lib/features/home/presentation/widgets/bot_action_buttons.dart
  modified:
    - TradingBot.Mobile/lib/app/router.dart

key-decisions:
  - "DcaBotDetailScreen uses no Scaffold backgroundColor — global transparent from AppTheme.dark allows AmbientBackground orbs to show through"
  - "parentNavigatorKey: rootNavigatorKey on /home/bot-detail route — pushes full-screen above tab shell, matching portfolio sub-screen pattern"
  - "Frequency label uses 'Daily at HH:MM / N' format — not 'Every 12 hours' which is wrong for this once-daily DCA app"
  - "BotStatsGrid uses GlassCard(stationary) — card is in a ScrollView but not inside a ListView, so BackdropFilter is safe"
  - "Private _OverviewTab HookConsumerWidget — isolates provider watching to the Overview tab only"

patterns-established:
  - "Pattern: DefaultTabController wrapping Scaffold with AppBar bottom TabBar + TabBarView body"
  - "Pattern: Private HookConsumerWidget tab widgets to isolate provider subscriptions per tab"
  - "Pattern: Stale cache fallback in switch expression — effectiveHome = live or cached on error"

requirements-completed: [DCA-UI-01, DCA-UI-02, DCA-UI-03]

# Metrics
duration: 3min
completed: 2026-02-22
---

# Phase 35.2 Plan 01: DCA Bot Detail Screen Structural Shell Summary

**DcaBotDetailScreen with 3-tab DefaultTabController, glass stats grid, BTC identity header, and PressableScale action buttons navigable from /home/bot-detail**

## Performance

- **Duration:** 3 min
- **Started:** 2026-02-22T13:51:37Z
- **Completed:** 2026-02-22T13:54:57Z
- **Tasks:** 2
- **Files modified:** 5

## Accomplishments

- Created DcaBotDetailScreen as HookConsumerWidget with DefaultTabController (3 tabs: Overview, History, Parameters)
- Built BotStatsGrid in GlassCard(stationary) showing 6 stats: invested amount, total PnL (with profitGreen/lossRed coloring), frequency, amount/period, avg price, next purchase time
- Wired GoRoute at /home/bot-detail with parentNavigatorKey: rootNavigatorKey for full-screen push (no bottom nav bar on detail screen)
- BotActionButtons renders More (no-op) and Share (clipboard copy with SnackBar) using PressableScale micro-interaction

## Task Commits

Each task was committed atomically:

1. **Task 1: Create bot identity header, stats grid, and action buttons widgets** - `3729f2e` (feat)
2. **Task 2: Create DcaBotDetailScreen and register route** - `42c71c2` (feat)

## Files Created/Modified

- `TradingBot.Mobile/lib/features/home/presentation/dca_bot_detail_screen.dart` - DcaBotDetailScreen HookConsumerWidget with DefaultTabController, _OverviewTab watching homeDataProvider + configDataProvider
- `TradingBot.Mobile/lib/features/home/presentation/widgets/bot_identity_header.dart` - BTC CircleAvatar with bitcoinOrange + "BTC Recurring buy" name + uptime computed from firstPurchaseDate
- `TradingBot.Mobile/lib/features/home/presentation/widgets/bot_stats_grid.dart` - 6-stat grid in GlassCard(stationary) with _StatCell, PnL coloring via profitGreen/lossRed, moneyStyle tabular figures
- `TradingBot.Mobile/lib/features/home/presentation/widgets/bot_action_buttons.dart` - More (no-op) + Share (Clipboard.setData) PressableScale buttons with glass-styled containers
- `TradingBot.Mobile/lib/app/router.dart` - Added GoRoute('bot-detail') under /home branch with parentNavigatorKey: rootNavigatorKey

## Decisions Made

- Frequency label is "Daily at HH:MM / N" (not "Every 12 hours") — this app has once-daily DCA, the reference screenshot is from a different product
- BotStatsGrid uses GlassCard(stationary) — the card lives in a SingleChildScrollView, not a ListView, so BackdropFilter is safe (no Impeller jank)
- _OverviewTab is a private HookConsumerWidget — keeps provider watching scoped to the tab that needs it, History/Parameters tabs load their own providers in Plan 02

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None.

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness

- Detail screen structural shell complete; route navigable via `context.push('/home/bot-detail')`
- Plan 02 can add: PnL chart card, Bot info card, event history section to Overview tab; History tab with PurchaseListItem; Parameters tab with ConfigResponse display; loading skeleton
- Chart placeholder SizedBox(height: 200) marks the insertion point for fl_chart in Plan 02

---
*Phase: 35.2-dca-bot-detail-screen*
*Completed: 2026-02-22*
