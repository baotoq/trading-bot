# Milestone v1.2: Web Dashboard

**Status:** SHIPPED 2026-02-14
**Phases:** 9-12 (5 phases including 9.1)
**Total Plans:** 12

## Overview

Visual web dashboard for monitoring portfolio, viewing purchase history, running backtests, managing configuration, and tracking live bot status. Built with Nuxt 4, @nuxt/ui v4, Tailwind CSS v4, Chart.js, and integrated into .NET Aspire orchestration.

## Phases

### Phase 9: Infrastructure & Aspire Integration

**Goal**: Nuxt 4 frontend project is created, orchestrated via Aspire, and secured with API key authentication
**Depends on**: Nothing (new frontend layer)
**Plans**: 2 plans

Plans:
- [x] 09-01-PLAN.md -- Nuxt 4 project creation + Aspire orchestration
- [x] 09-02-PLAN.md -- API proxy + API key authentication

**Details:**
- Scaffolded Nuxt 4 project with @nuxt/ui, Tailwind CSS v4, TypeScript
- Integrated into Aspire AppHost via AddNodeApp on port 3000
- API key authentication with ApiKeyEndpointFilter (401 missing, 403 invalid)
- CORS-free API proxy via Nuxt routeRules (/proxy/api/**)
- Server-to-server auth pattern (Nuxt server calls .NET with API key)

### Phase 9.1: Migrate Dashboard to Fresh Nuxt Setup (INSERTED)

**Goal**: Move API proxy & auth code from old dashboard/ to fresh Nuxt 4 TradingBot.Dashboard/ project
**Depends on**: Phase 9
**Plans**: 1 plan

Plans:
- [x] 09.1-01-PLAN.md -- Migrate files, install deps, update AppHost path, remove old directory

**Details:**
- Migrated from old dashboard/ to TradingBot.Dashboard/ (Nuxt 4 structure)
- Updated @nuxt/ui to v4 for Nuxt 4 compatibility
- Updated AppHost.cs path reference
- Removed old dashboard/ directory

### Phase 10: Dashboard Core

**Goal**: User can view complete portfolio overview, paginated purchase history, and live bot status
**Depends on**: Phase 9
**Plans**: 3 plans

Plans:
- [x] 10-01-PLAN.md -- Backend dashboard API endpoints (portfolio, purchases, status, chart)
- [x] 10-02-PLAN.md -- Frontend types, composables, npm deps, and server proxy routes
- [x] 10-03-PLAN.md -- Dashboard UI components and main page assembly

**Details:**
- 4 RESTful dashboard API endpoints with cursor-based pagination
- TypeScript types matching backend DTOs, polling composables (10s interval)
- 6 Vue components: StatCard, PortfolioStats, PriceChart, LiveStatus, PurchaseCard, PurchaseHistory
- Interactive price chart with 6 timeframe presets and purchase markers
- Infinite scroll purchase history with date/tier filtering
- Live countdown timer and health monitoring

### Phase 11: Backtest Visualization

**Goal**: User can run backtests from dashboard and visualize equity curves comparing smart DCA vs fixed DCA
**Depends on**: Phase 10
**Plans**: 4 plans

Plans:
- [x] 11-01-PLAN.md -- Backend config endpoint, proxy routes, TypeScript types, composable
- [x] 11-02-PLAN.md -- BacktestForm, BacktestChart, BacktestMetrics, backtest page
- [x] 11-03-PLAN.md -- SweepForm, SweepResultsTable, tabbed page layout
- [x] 11-04-PLAN.md -- BacktestComparison with session storage, Add to Compare integration

**Details:**
- Backtest form with date presets, editable tiers, progress indicator
- Equity curve chart with dual Y-axes (USD/BTC), tier-colored purchase markers
- Parameter sweep with sortable results table, drill-down to full detail
- Side-by-side comparison of up to 3 backtest configurations
- Session storage persistence for comparison state

### Phase 12: Configuration Management

**Goal**: User can view and edit DCA configuration from dashboard with server-side validation
**Depends on**: Phase 11
**Plans**: 2 plans

Plans:
- [x] 12-01-PLAN.md -- Backend: DB entity, ConfigurationService, API endpoints
- [x] 12-02-PLAN.md -- Frontend: Config tab UI with form, tiers table, validation

**Details:**
- DcaConfiguration entity with singleton constraint and JSONB tiers
- ConfigurationService with IOptionsMonitor cache invalidation
- Config panel with view/edit toggle, Zod validation matching backend rules
- Editable multiplier tiers table (add/remove, max 5, auto-sort)
- Confirmation dialog for critical field changes (amount, schedule, dry run)

---

## Milestone Summary

**Decimal Phases:**
- Phase 9.1: Migrate Dashboard to Fresh Nuxt Setup (inserted after Phase 9 for @nuxt/ui v4 compatibility)

**Key Decisions:**
- Nuxt 4 for dashboard (not Blazor/Razor) -- user preference, modern Vue ecosystem
- Server-to-server auth pattern (Nuxt server calls .NET with API key, browser calls Nuxt without key)
- Use /proxy/api/** prefix to avoid Nuxt server API routing conflicts (/api/** reserved)
- Cursor-based pagination for purchase history (avoids pagination drift)
- vue-chartjs Line component (not raw Chart.js) for proper Vue lifecycle integration
- Session storage for comparison summary only, memory cache for purchaseLog (avoids quota issues)
- Singleton entity pattern with fixed GUID for DCA configuration (enforced via CHECK constraint)
- IOptionsMonitor cache invalidation for immediate config effect after DB update

**Issues Resolved:**
- @nuxt/ui v3 incompatible with Nuxt 4 -- migrated to v4
- AddNpmApp not available in Aspire.Hosting.JavaScript 13.1.1 -- used AddNodeApp
- nuxi init interactive prompts -- manual project scaffolding instead

**Issues Deferred:**
- PORT-05: Purchase count/first-last dates available in API but not rendered in UI

**Technical Debt Incurred:**
- PORT-05 UI gap (data flows correctly, just needs StatCard components added)
- Runtime human testing needed for Aspire orchestration, browser rendering, config edit UX

---

_For current project status, see .planning/ROADMAP.md_
